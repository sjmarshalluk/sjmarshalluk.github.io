<html>
  <head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

    <style type="text/css">
      .a-enter-vr { display: none; }

      .buttons {
        position: absolute;
        width: 44px;
        height: 94px;
        bottom: 10px;
        right: 10px;
        z-index: 9999;
      }
      button {
        width: 44px;
        height: 44px;
        border-radius: 44px;
        background-color: #fff;
        margin-bottom: 10px;
        border: none;
      }
    </style>
  </head>
  <body>



<script>
  /*
  AFRAME.registerComponent("foo", {
    init: function() {
      var player = document.querySelector("a-camera")
      window.addEventListener("keydown", (e) => {
        if (e.code === "KeyR") {
          var angle = player.getAttribute("rotation")
          console.log(angle)
          let theta = (angle.x * Math.PI / 180) + Math.PI / 2
          let fi = angle.y * Math.PI / 180
          let r = 0.1
          let z = Math.sin(theta) * Math.cos(fi) * r
          let x = Math.sin(theta) * Math.sin(fi) * r
          let y = Math.cos(theta) * r

          var pos = player.getAttribute("position")
          pos.x -= x;
          pos.y -= y;
          pos.z -= z;

          player.setAttribute("position", pos);
        }
      })
    }
  })
  */



  AFRAME.registerComponent('plane', {
    init: function() {
      var btn = document.getElementById('btn-plane');
      btn.addEventListener("click", function() {
        //var entityEl = document.querySelector("a-gltf-model");
        var entityEl = document.getElementById("path")
        var pos = entityEl.getAttribute("position");
        console.log(pos)
        if (pos.y === 1000) {
          entityEl.setAttribute('position', '0 0 -3');
        } else {
          entityEl.setAttribute('position', '0 1000 -3');
        }
        
      });
    }
  });


  AFRAME.registerComponent("path", {
    init: function() {
      var btn = document.getElementById('btn-path');
      btn.addEventListener("click", function() {
        var path = document.getElementById("path");
        path.setAttribute('position', '-23.7 0 20');


        var dollhouse = document.getElementById("dollhouse");
        dollhouse.setAttribute('position', '-0.5 1000 -4');
        
      });
    }
  });


  AFRAME.registerComponent("dollhouse", {
    init: function() {
      var btn = document.getElementById('btn-doll');
      btn.addEventListener("click", function() {
        //var entityEl = document.querySelector("a-gltf-model");

        var path = document.getElementById("path");
        path.setAttribute('position', '-23.7 1000 20');


        var dollhouse = document.getElementById("dollhouse");
        dollhouse.setAttribute('position', '-0.5 0 -4');

        /*
        var entityEl = document.getElementById("dollhouse")
        var pos = entityEl.getAttribute("position");
        console.log(pos)
        if (pos.y === 1000) {
          entityEl.setAttribute('position', '-0.5 0 -1');
        } else {
          entityEl.setAttribute('position', '-0.5 1000 -1');
        }
        */
        
      });
    }
  });

  

</script>

<div class="buttons">

<button id="btn-path">path</button>
<button id="btn-doll">doll</button>
</div>



<a-scene>
  <a-gltf-model dollhouse id='dollhouse' position='-0.5 0 -4' rotation='0 205 0' scale='0.5 0.5 0.5' src='https://sjmarshalluk.github.io/model-maker/models/lavant-test.gltf'></a-gltf-model>

  <a-gltf-model path id='path' position='-23.7 0 20' rotation='0 205 0' scale='10 10 10' src='https://sjmarshalluk.github.io/model-maker/models/lavant-path-test.gltf'></a-gltf-model>

  <a-camera></a-camera>
</a-scene>


<script>

  
/*
    window.addEventListener("load", initAFrame);

    function initAFrame(){

  AFRAME.registerComponent("plane", {
    init: function() {
      var entityEl = document.querySelector("a-plane");
      entityEl.setAttribute("color", "#000000");
      entityEl.setAttribute("position", {
            "x" : 0,
            "y" : 3.8,
            "z" : 3.8
        });
    }
  })

}
*/

</script>

  </body>
</html>